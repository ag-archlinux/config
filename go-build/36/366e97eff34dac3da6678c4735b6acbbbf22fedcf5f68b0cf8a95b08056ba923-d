// Code generated by cmd/cgo; DO NOT EDIT.

//line /tmp/yay/src/yay-8.1173.0/.go/src/github.com/jguer/go-alpm/callbacks.go:1:1
// callbacks.go - Handles libalpm callbacks.
//
// Copyright (c) 2013 The go-alpm Authors
//
// MIT Licensed. See LICENSE for details.

package alpm

/*
#include <stdint.h>
#include <alpm.h>
void logCallback(alpm_loglevel_t level, char *cstring);
void go_alpm_log_cb(alpm_loglevel_t level, const char *fmt, va_list arg);
void go_alpm_set_logging(alpm_handle_t *handle);
void go_alpm_set_question(alpm_handle_t *handle);
*/
import _ "unsafe"

import (
	"unsafe"
)

type logCallbackSig func(LogLevel, string)
type questionCallbackSig func(QuestionAny)

var DefaultLogLevel = LogWarning

func DefaultLogCallback(lvl LogLevel, s string) {
	if lvl <= DefaultLogLevel {
		print("go-alpm: ", s)
	}
}

var globalLogCallback logCallbackSig
var globalQuestionCallback questionCallbackSig

//export logCallback
func logCallback(level _Ctype_alpm_loglevel_t, cstring *_Ctype_char) {
	globalLogCallback(LogLevel(level), (_Cfunc_GoString)(cstring))
}

//export questionCallback
func questionCallback(question *_Ctype_alpm_question_t) {
	q := (*_Ctype_struct__alpm_question_any_t)(unsafe.Pointer(question))
	globalQuestionCallback(QuestionAny{q})
}

func (h *Handle) SetLogCallback(cb logCallbackSig) {
	globalLogCallback = cb
	func(_cgo0 *_Ctype_struct___alpm_handle_t) {;	_cgoCheckPointer(_cgo0);	(_Cfunc_go_alpm_set_logging)(_cgo0);}(h.ptr)
}

func (h *Handle) SetQuestionCallback(cb questionCallbackSig) {
	globalQuestionCallback = cb
	func(_cgo0 *_Ctype_struct___alpm_handle_t) {;	_cgoCheckPointer(_cgo0);	(_Cfunc_go_alpm_set_question)(_cgo0);}(h.ptr)
}
